<!-- concept.html (Concept select with Heaven white fade, logo → index.html) -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Concept Select</title>
  <style>
    :root{
      --card-size: min(44vw, 310px);
      --side-scale: 0.78;
      --gap: min(18vw, 220px);
      --radius: 18px;
      --ease: cubic-bezier(.18,.8,.2,1);
      --arrow-w: clamp(34px, 4.8vw, 52px);
      --arrow-h: clamp(78px, 11vw, 120px);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      height:100vh;
      display:grid;
      place-items:center;
      background:
        radial-gradient(900px circle at 50% 45%, #6f6f6f 0%, #4c4c4c 32%, #343434 62%, #222222 82%, #181818 100%),
        linear-gradient(120deg, #ffffff18 0%, transparent 35%, #ffffff12 55%, transparent 75%, #ffffff18 100%);
      background-size: 100% 100%, 220% 220%;
      animation: bgFlow 8s linear infinite;
      color:#fff;
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      overflow:hidden;
      position: relative;
      transition: background 320ms ease;
    }

    /* 배경 도트 */
    .bg-dots{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:0;
      background-image:
        radial-gradient(circle, rgba(255,255,255,0.26) 0, rgba(255,255,255,0.26) 2px, transparent 2px),
        radial-gradient(circle, rgba(255,255,255,0.16) 0, rgba(255,255,255,0.16) 2px, transparent 2px);
      background-size: 120px 120px, 140px 140px;
      background-position: 0 0, 60px 40px;
      opacity:0.7;
      animation: dotDrift 14s linear infinite;
      mix-blend-mode: screen;
    }

    @keyframes bgFlow{
      0%{ background-position: 0 0, 0% 0%; }
      100%{ background-position: 0 0, 100% 100%; }
    }

    @keyframes dotDrift{
      0%{ background-position: 0 0, 60px 40px; }
      50%{ background-position: -40px 30px, 20px 80px; }
      100%{ background-position: -80px 60px, 100px 120px; }
    }

    /* 컨셉별 배경 톤 */
    body.theme-glam{
      background:
        radial-gradient(900px circle at 50% 45%, #777777 0%, #4f4f4f 32%, #363636 62%, #232323 82%, #191919 100%),
        linear-gradient(120deg, #f5f5f520 0%, transparent 35%, #ffffff18 55%, transparent 75%, #f5f5f520 100%);
      background-size: 100% 100%, 220% 220%;
    }
    body.theme-heaven{
      background:
        radial-gradient(900px circle at 50% 45%, #6a6a6a 0%, #414141 32%, #2b2b2b 62%, #191919 82%, #121212 100%),
        radial-gradient(700px circle at 15% 80%, rgba(255,255,255,0.28) 0%, transparent 60%),
        radial-gradient(760px circle at 90% 10%, rgba(180,220,255,0.22) 0%, transparent 60%);
      background-size: 100% 100%, 100% 100%, 100% 100%;
    }
    body.theme-pop{
      background:
        radial-gradient(900px circle at 50% 45%, #727272 0%, #464646 32%, #303030 62%, #1e1e1e 82%, #151515 100%),
        radial-gradient(780px circle at 80% 20%, rgba(255,150,215,0.20) 0%, transparent 60%),
        radial-gradient(720px circle at 18% 85%, rgba(255,190,230,0.14) 0%, transparent 60%);
      background-size: 100% 100%, 100% 100%, 100% 100%;
    }

    /* 좌상단 로고 */
    .logo-link{
      position:fixed;
      top:16px;
      left:22px;
      z-index:60;
      display:inline-block;
    }
    .logo-link img{
      height:80px;
      width:auto;
      display:block;
    }

    .stage{
      z-index:1;
      position:relative;
      width: min(92vw, 980px);
      height: min(80vh, 640px);
      display:grid;
      place-items:center;
      transition: transform 900ms var(--ease), filter 900ms var(--ease);
    }

    body.fade-out .stage{
      transform: scale(1.04) translateY(-4px);
      filter: blur(12px) brightness(0.18);
    }

    .track{
      position:relative;
      width:100%;
      height:100%;
      display:grid;
      place-items:center;
      perspective:1200px;
      transform-style:preserve-3d;
    }

    .card{
      position:absolute;
      width: var(--card-size);
      height: var(--card-size);
      border-radius: var(--radius);
      overflow:hidden;
      cursor: default;
      user-select:none;
      isolation: isolate;
      background:
        radial-gradient(120% 120% at 10% 0%, #ffffff38, transparent 45%),
        linear-gradient(135deg,
          #060606 0%,
          #1a1a1a 10%,
          #3f3f3f 22%,
          #bdbdbd 34%,
          #f3f3f3 40%,
          #8a8a8a 54%,
          #2a2a2a 66%,
          #0a0a0a 100%);
      box-shadow:
        inset 0 0 0 1px #ffffff10,
        inset 0 22px 40px #ffffff12;
      transition:
        transform 700ms var(--ease),
        opacity 700ms var(--ease),
        filter 700ms var(--ease),
        box-shadow 700ms var(--ease);
    }

    .card::before{
      content:"";
      position:absolute;
      inset:0;
      border-radius: var(--radius);
      padding: 2px;
      background:
        linear-gradient(145deg,
          #ffffff 0%,
          #d9d9d9 18%,
          #7a7a7a 40%,
          #222222 62%,
          #f8f8f8 100%);
      -webkit-mask:
        linear-gradient(#000 0 0) content-box,
        linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events:none;
      opacity: 1;
      z-index: 3;
      filter: drop-shadow(0 0 6px #ffffff35);
    }

    .card::after{
      content:"";
      position:absolute;
      left:6%; right:6%; top:6px; height:2px;
      background: linear-gradient(90deg, transparent, #ffffffcc, transparent);
      filter: blur(.3px);
      opacity:.9;
      pointer-events:none;
      z-index: 2;
    }

    .card img{
      position:relative;
      z-index:1;
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      mix-blend-mode: screen;
      opacity:0.95;
      pointer-events:none;
    }

    .card.pos-center img{
      transition: transform 900ms var(--ease), opacity 900ms var(--ease);
    }

    body.fade-out .card.pos-center img{
      transform: scale(1.12);
      opacity: 0.35;
    }

    .center-label{
      position:absolute;
      left:50%;
      top: calc(50% + (var(--card-size) / 2) + 34px);
      transform:translateX(-50%);
      font-weight:800;
      letter-spacing:0.12em;
      text-transform:uppercase;
      font-size: clamp(13px, 2.4vw, 17px);
      color:#f2f2f2;
      text-shadow:0 2px 10px #000;
      white-space:nowrap;
      z-index:20;
      pointer-events:none;
    }

    .pos-center{
      transform: translateX(0) translateZ(170px) scale(1);
      z-index:3;
      opacity:1;
      filter:saturate(1.15) brightness(1.08) contrast(1.05);
      box-shadow:
        0 34px 90px #000,
        0 70px 80px -50px #00000080,
        0 0 0 1px #ffffff38,
        inset 0 0 0 1px #ffffff24;
      cursor:pointer;
    }
    .pos-left{
      transform: translateX(calc(-1 * var(--gap))) translateZ(0) scale(var(--side-scale)) rotateY(18deg);
      z-index:1;
      opacity:0.9;
      filter:saturate(0.9) brightness(0.9);
      box-shadow:
        0 18px 55px #000a,
        0 60px 70px -55px #00000070;
    }
    .pos-right{
      transform: translateX(var(--gap)) translateZ(0) scale(var(--side-scale)) rotateY(-18deg);
      z-index:1;
      opacity:0.9;
      filter:saturate(0.9) brightness(0.9);
      box-shadow:
        0 18px 55px #000a,
        0 60px 70px -55px #00000070;
    }

    .card.is-clicking{ animation: clickPop 420ms var(--ease); }
    @keyframes clickPop{
      0%{ transform: translateX(0) translateZ(170px) scale(1); }
      40%{ transform: translateX(0) translateZ(155px) scale(0.93); }
      100%{ transform: translateX(0) translateZ(170px) scale(1); }
    }

    .arrow{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      width: var(--arrow-w);
      height: var(--arrow-h);
      display:grid;
      place-items:center;
      cursor:pointer;
      z-index:10;
      background: transparent;
      border: none;
      padding: 0;
      filter: drop-shadow(0 10px 18px #000);
      transition: transform 200ms ease, filter 200ms ease;
    }
    .arrow.left{ left: clamp(8px, 2vw, 22px); }
    .arrow.right{ right: clamp(8px, 2vw, 22px); }
    .arrow svg{ width:100%; height:100%; display:block; }
    .arrow:hover{ filter: drop-shadow(0 12px 20px #000) brightness(1.08); transform:translateY(-50%) scale(1.05); }
    .arrow:active{ transform:translateY(-50%) scale(0.95); }

    .glow{
      position:absolute;
      width: min(70vw, 520px);
      height: min(70vw, 520px);
      background: radial-gradient(closest-side, #ffffff12, transparent 70%);
      filter: blur(30px);
      z-index:0;
      pointer-events:none;
    }

    #sparkCanvas{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:30;
      mix-blend-mode:screen;
    }

    .screen-fade{
      position:fixed;
      top:50%; left:50%;
      width:40vmax; height:40vmax;
      transform:translate(-50%, -50%) scale(0.1);
      border-radius:999px;
      background:radial-gradient(circle at center,
        rgba(0,0,0,0.15) 0%,
        rgba(0,0,0,0.5) 38%,
        rgba(0,0,0,0.86) 72%,
        #000000 100%);
      opacity:0;
      pointer-events:none;
      filter: blur(20px);
      transition: transform 900ms var(--ease), opacity 900ms var(--ease);
      z-index:999;
    }

    .screen-fade::after{
      content:"";
      position:absolute;
      inset:0;
      border-radius:inherit;
      background:#000000;
      opacity:0;
      transition: opacity 450ms var(--ease) 450ms;
    }

    body.fade-out .screen-fade{
      opacity:1;
      transform:translate(-50%, -50%) scale(4.5);
    }

    body.fade-out .screen-fade::after{
      opacity:1;
    }

    /* Heaven일 때만 흰색 플래시로 오버라이드 */
    body.heaven-fade .screen-fade{
      background:radial-gradient(circle at center,
        rgba(255,255,255,0.25) 0%,
        rgba(255,255,255,0.7) 38%,
        rgba(255,255,255,0.95) 72%,
        #ffffff 100%);
    }

    body.heaven-fade .screen-fade::after{
      background:#ffffff;
    }

    @media (max-width: 520px){
      :root{ --gap: 150px; }
      .center-label{
        top: calc(50% + (var(--card-size) / 2) + 26px);
      }
    }
  </style>
</head>
<body>
  <div class="bg-dots"></div>

  <a href="index.html" class="logo-link">
    <img src="logo.png" alt="Logo">
  </a>

  <div class="stage">
    <div class="glow"></div>

    <div class="track" id="track">
      <div class="card" data-index="0" data-name="Glam">
        <img src="cs1.png" alt="Glam concept">
      </div>
      <div class="card" data-index="1" data-name="Heaven">
        <img src="cs2.png" alt="Heaven concept">
      </div>
      <div class="card" data-index="2" data-name="Pop">
        <img src="cs3.png" alt="Pop concept">
      </div>
    </div>

    <div class="center-label" id="centerLabel">Glam</div>

    <canvas id="sparkCanvas"></canvas>

    <button class="arrow left" id="prevBtn" aria-label="previous">
      <svg viewBox="0 0 100 180" aria-hidden="true">
        <defs>
          <linearGradient id="metal" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%"  stop-color="#fdfdfd"/>
            <stop offset="25%" stop-color="#d0d0d0"/>
            <stop offset="55%" stop-color="#5a5a5a"/>
            <stop offset="80%" stop-color="#2a2a2a"/>
            <stop offset="100%" stop-color="#b8b8b8"/>
          </linearGradient>
        </defs>
        <polyline points="72,8 18,90 72,172" fill="none" stroke="url(#metal)" stroke-width="16" stroke-linecap="round" stroke-linejoin="round"/>
        <polyline points="66,20 30,90 66,160" fill="none" stroke="#d0d0d0aa" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>

    <button class="arrow right" id="nextBtn" aria-label="next">
      <svg viewBox="0 0 100 180" aria-hidden="true">
        <defs>
          <linearGradient id="metal2" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%"  stop-color="#fdfdfd"/>
            <stop offset="25%" stop-color="#d0d0d0"/>
            <stop offset="55%" stop-color="#5a5a5a"/>
            <stop offset="80%" stop-color="#2a2a2a"/>
            <stop offset="100%" stop-color="#b8b8b8"/>
          </linearGradient>
        </defs>
        <polyline points="28,8 82,90 28,172" fill="none" stroke="url(#metal2)" stroke-width="16" stroke-linecap="round" stroke-linejoin="round"/>
        <polyline points="34,20 70,90 34,160" fill="none" stroke="#d0d0d0aa" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
  </div>

  <div class="screen-fade"></div>

  <script>
    const cards = Array.from(document.querySelectorAll(".card"));
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const centerLabel = document.getElementById("centerLabel");

    const names = ["Glam", "Heaven", "Pop"];
    let current = 0;
    const mod = (n,m)=> (n % m + m) % m;

    function setTheme(){
      document.body.classList.remove("theme-glam","theme-heaven","theme-pop");
      if(current === 0) document.body.classList.add("theme-glam");
      else if(current === 1) document.body.classList.add("theme-heaven");
      else if(current === 2) document.body.classList.add("theme-pop");
    }

    function render(){
      const left = mod(current - 1, cards.length);
      const right = mod(current + 1, cards.length);

      cards.forEach((card, i) => {
        card.classList.remove("pos-left","pos-center","pos-right");
        card.style.pointerEvents = "none";
        card.style.opacity = 1;

        if(i === current){
          card.classList.add("pos-center");
          card.style.pointerEvents = "auto";
        } else if(i === left){
          card.classList.add("pos-left");
        } else if(i === right){
          card.classList.add("pos-right");
        } else {
          card.style.opacity = 0;
          card.style.transform = "translateZ(-220px) scale(0.6)";
        }
      });

      centerLabel.textContent = names[current];
      setTheme();
    }

    function move(dir){
      current = mod(current + dir, cards.length);
      render();
    }

    const sparkCanvas = document.getElementById("sparkCanvas");
    const sctx = sparkCanvas.getContext("2d");
    let sparks = [];
    let mouseX = window.innerWidth / 2;
    let mouseY = window.innerHeight / 2;
    const maxSparks = 160;

    function resizeSpark(){
      sparkCanvas.width  = window.innerWidth;
      sparkCanvas.height = window.innerHeight;
    }
    resizeSpark();
    window.addEventListener("resize", resizeSpark);

    window.addEventListener("mousemove", (e)=>{
      mouseX = e.clientX;
      mouseY = e.clientY;
      for(let i=0; i<6; i++){
        if(sparks.length > maxSparks) sparks.shift();
        const angle = Math.random() * Math.PI * 2;
        const speed = Math.random() * 0.6 + 0.15;
        sparks.push({
          x: mouseX + (Math.random()-0.5) * 12,
          y: mouseY + (Math.random()-0.5) * 12,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          life: 1,
          decay: 0.02 + Math.random() * 0.03,
          size: Math.random() * 1.8 + 0.8,
          rot: Math.random() * Math.PI,
          rotSpeed: (Math.random() - 0.5) * 0.12
        });
      }
    });

    function drawSparks(){
      sctx.clearRect(0,0,sparkCanvas.width,sparkCanvas.height);

      for(let i=0; i<sparks.length; i++){
        const p = sparks[i];
        p.x += p.vx;
        p.y += p.vy;
        p.life -= p.decay;
        p.rot += p.rotSpeed;
        if(p.life <= 0){
          sparks.splice(i,1);
          i--;
          continue;
        }
        const alpha = p.life;

        sctx.save();
        sctx.translate(p.x, p.y);
        sctx.rotate(p.rot);
        sctx.globalAlpha = alpha;
        sctx.lineWidth = 1;
        sctx.strokeStyle = "rgba(255,255,255," + alpha + ")";
        sctx.shadowBlur = 10;
        sctx.shadowColor = "rgba(255,255,255," + (0.7 * alpha) + ")";

        const s = p.size * 2.2;
        sctx.beginPath();
        sctx.moveTo(0, -s);
        sctx.lineTo(0, s);
        sctx.moveTo(-s, 0);
        sctx.lineTo(s, 0);
        sctx.stroke();

        sctx.fillStyle = "rgba(255,255,255," + alpha + ")";
        sctx.fillRect(-0.4, -0.4, 0.8, 0.8);

        sctx.restore();
      }
      requestAnimationFrame(drawSparks);
    }
    drawSparks();

    prevBtn.addEventListener("click", () => move(-1));
    nextBtn.addEventListener("click", () => move(1));

    cards.forEach(card => {
      card.addEventListener("click", () => {
        const idx = Number(card.dataset.index);
        if(idx !== current) return;

        card.classList.add("is-clicking");

        const name = card.dataset.name.toLowerCase();

        document.body.classList.add("fade-out");
        if(name === "heaven"){
          document.body.classList.add("heaven-fade");
        } else {
          document.body.classList.remove("heaven-fade");
        }

        let target = null;
        if(name === "glam")   target = "loading_glam.html";
        else if(name === "heaven") target = "loading_heaven.html";
        else if(name === "pop")    target = "loading_pop.html";

        if(target){
          setTimeout(() => {
            window.location.href = target;
          }, 950);
        }
      });
    });

    render();

    window.addEventListener("keydown", (e)=>{
      if(e.key === "ArrowLeft") move(-1);
      if(e.key === "ArrowRight") move(1);
    });
  </script>
</body>
</html>
